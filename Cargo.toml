[package]
name = "mmsdm"
version = "0.3.0"
authors = ["Eric Sheppard <eric@sheppard.cloud>", "Nayika Sheppard <nayika@eigenmo.de>"]
edition = "2021"
license = "MIT"
repository = "https://github.com/eigenmo-de/mmsdm-rs"
description = "Parse and Transform MMSDM data"
resolver = "2"

[workspace]
members = [
    "codegen",
    "xtask",
]

[[example]]
name = "parquet_fs"
required-features = ["save_as_parquet", "dispatch", "sled", "bincode"]

[[example]]
name = "parquet"
required-features = ["save_as_parquet", "dispatch"]

[[example]]
name = "load"
required-features = ["sql_server", "dispatch", "settlement_data"]

[[example]]
name = "download_and_parse"
required-features = ["dispatch"]

[dependencies]
log = "0.4.14"
zip = "0.5.13"
csv = "1.1.6"
chrono-tz = "0.6.1"
thiserror = "1.0.30"
rust_decimal = "1.22.0"
serde_json = "1.0.79"
num-traits = "0.2.14"
cfg-if = "1.0.0"

[dependencies.serde]
version = "1.0.136"
features = ["derive"]

[dependencies.chrono]
version = "0.4.19"
features = ["serde"]

[dependencies.arrow2]
version = "0.6.2"
features = ["io_csv", "io_csv_read"]
optional = true

[dependencies.parquet2]
version = "0.5.2"
optional = true

[dependencies.tiberius]
version = "0.7.1"
features = ["rust_decimal", "chrono"]
optional = true

[dependencies.futures]
version = "0.3.21"
optional = true

[dependencies.bincode]
version = "1.3.3"
optional = true

[dependencies.sled]
version = "0.34.7"
optional = true

[dev-dependencies]
anyhow = "1"
tiberius = { version = "0.6", features = ["rust_decimal"] }
serde_json = "1"
env_logger = "0.8"
tokio = { version = "1", features = ["full"]  }
tokio-util = { version = "0.6", features = ["compat"]  }
flate2 = "1"
reqwest = { version = "0.11", features = ["blocking"] }
scraper = "0.12"
futures = "0.3"
rayon = "1.5"
once_cell = "1.3"
bytes = "1"


[features]
sql_server = ["tiberius", "futures"]
save_as_parquet = ["parquet2", "arrow2"]
ancillary_services = []
asoffer = []
bids = []
billing_config = []
billing_run = []
configuration = []
demand_forecasts = []
dispatch = []
force_majeure = []
gd_instruct = []
generic_constraint = []
historical = []
irauction = []
market_config = []
market_notice = []
mcc_dispatch = []
meter_data = []
mrevent = []
mtpasa = []
network = []
p5min = []
participant_registration = []
pdpasa = []
pre_dispatch = []
prudentials = []
reserve_data = []
settlement_config = []
settlement_data = []
stpasa_solution = []
trading_data = []
voltage_instructions = []
mmsdm = ["ancillary_services","asoffer","bids","billing_config","billing_run","configuration","demand_forecasts","dispatch","force_majeure","gd_instruct","generic_constraint","historical","irauction","market_config","market_notice","mcc_dispatch","meter_data","mrevent","mtpasa","network","p5min","participant_registration","pdpasa","pre_dispatch","prudentials","reserve_data","settlement_config","settlement_data","stpasa_solution","trading_data","voltage_instructions"]
default = []
